(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{332:function(e,t,r){"use strict";r.r(t);r(33),r(34),r(10),r(88),r(25);var o=r(24),n=r(35),d=r(48),c=r(57),l=r(37),v=r(40),m=r(50),f=r(41),h=r.n(f),_=r(47);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(c.a)(this,r)}}var k=function e(t,r,n,d,c,l){Object(o.a)(this,e),this.name=t,this.adresse=r,this.numero=n,this.codePostal=d,this.email=c,this.type=l},C=function e(t,r,n,d,c,l){Object(o.a)(this,e),this.name=t,this.adresse=r,this.numero=n,this.codePostal=d,this.email=c,this.type=l},F=function(e){Object(d.a)(r,e);var t=y(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return r}(k),w=function(e){Object(d.a)(r,e);var t=y(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return r}(C),x=function e(t,r,n,d){Object(o.a)(this,e),this.adresse=t,this.numero=r,this.codePostal=n,this.email=d},P=function e(code,t,r){Object(o.a)(this,e),this.code=code,this.produits_paniers=t,this.adresses=r};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(l.a)(e);if(t){var n=Object(l.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(c.a)(this,r)}}var L=function(e,t,r,desc){var o,n=arguments.length,d=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(v.a)(Reflect))&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(d=(n<3?o(d):n>3?o(t,r,d):o(t,r))||d);return n>3&&d&&Object.defineProperty(t,r,d),d},j=function(e){Object(d.a)(r,e);var t=A(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).produitPaniers=[],e.addressLivraison=new k,e.addressFacturation=new C,e.addressFacturationBool=!1,e.createAccountBool=!1,e.errorAdress=new F,e.errorFacturation=new w,e.stateAdress=new x,e.stateFacturation=new x,e.totalPrice=0,e.URL=_.a,e.errorPassword="",e.showModal=!1,e.showForm=!0,e.modalContaint="",e}return Object(n.a)(r,[{key:"created",value:function(){this.getProductCart()}},{key:"prixTotal",value:function(e,t){var r=this;this.totalPrice=0,this.produitPaniers.forEach((function(element){var e;r.totalPrice+=(null===(e=element.recette)||void 0===e?void 0:e.prix)*element.quantite})),console.log(this.produitPaniers),console.log(this.totalPrice),h.a.put(_.a+"/produits-paniers/"+e,{quantite:null!=t?t:0})}},{key:"getProductCart",value:function(){var e=this,code=localStorage.getItem("panier");code&&(this.produitPaniers=[],h.a.get(_.a+"/produits-paniers?code="+code).then((function(t){var r,o=t.data.length;if(e.produitPaniers=t.data,0!=o)for(var i=0;i<t.data.length;i++){var n=t.data[i];e.totalPrice+=(null===(r=n.recette)||void 0===r?void 0:r.prix)*n.quantite}})))}},{key:"randomString",value:function(e,t){for(var r="",i=e;i>0;--i)r+=t[Math.floor(Math.random()*t.length)];return r}},{key:"sendCommande",value:function(){this.error(),0!=this.produitPaniers.length&&this.apiCommande()}},{key:"apiCommande",value:function(){var e=this;if(this.addressLivraison.adresse&&this.addressLivraison.numero&&this.addressLivraison.codePostal&&this.addressLivraison.name&&this.addressLivraison.email){this.addressLivraison.type="LIVRAISON";var t=new P;t.code=this.randomString(8,"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),t.produits_paniers=this.produitPaniers;var address=[];h.a.post(_.a+"/adress-livraiosns",this.addressLivraison).then((function(r){address.push(r.data),t.adresses=address,console.log(t.adresses),e.addressFacturationBool&&e.addressFacturation.adresse&&e.addressFacturation.numero&&e.addressFacturation.codePostal&&e.addressFacturation.name&&e.addressFacturation.email?(e.addressFacturation.type="FACTURATION",h.a.post(_.a+"/adress-livraiosns",e.addressFacturation).then((function(r){address.push(r.data),e.commandeApi(t),e.createAccountBool&&e.confirm==e.password?e.creationCompte(address[0]):e.shoMaodl("Commande envoyÃ©e avec successðŸ˜Œ")}))):(e.commandeApi(t),e.createAccountBool&&e.confirm==e.password?e.creationCompte(address[0]):e.shoMaodl("Commande envoyez avec successðŸ˜Œ"))}))}else console.log("ddffg")}},{key:"commandeApi",value:function(e){var t=this;h.a.post(_.a+"/commandes",e).then((function(e){localStorage.removeItem("panier"),t.$root.$emit("clear")}))}},{key:"errorPasswordMethode",value:function(){this.createAccountBool&&this.confirm!=this.password&&(this.stateConfirm=!1,this.errorPassword="La confirmation du mot de passe est incorrect")}},{key:"creationCompte",value:function(e){var t=this;this.errorPasswordMethode(),h.a.post(_.a+"/auth/local/register",{username:this.addressLivraison.name,email:this.addressLivraison.email,password:this.password,confirmed:!0,adresse:e}).then((function(e){t.errorPassword="",t.stateConfirm=!0,localStorage.setItem("token",e.data.jwt),localStorage.setItem("id_user",e.data.user.id),t.$root.$emit("connexion"),t.produitPaniers=[],t.totalPrice=0,t.shoMaodl("Commande envoyez avec successðŸ˜Œ")})).catch((function(e){console.log(e.response.status),400==e.response.status&&t.shoMaodl("Votre commande Ã  Ã©te enregistrer mais votre addresse email existe dÃ©jÃ  , veuillez faire la demande d'un nouveau mot de passe")}))}},{key:"shoMaodl",value:function(e){this.showModal=!0,this.modalContaint=e}},{key:"error",value:function(){this.addressLivraison.email||(this.errorAdress.email="Veuillez saisir l'adresse email de livraison",this.stateAdress.email=!1),this.addressLivraison.name||(this.errorAdress.name="Veuillez donner un nom pour l'adresse de livraison",this.stateAdress.name=!1),this.addressLivraison.codePostal||(this.errorAdress.codePostal="Veuillez donner un code postal pour l'adresse de livraison",this.stateAdress.codePostal=!1),this.addressLivraison.numero||(this.errorAdress.numero="Veuillez donner un numero de telephone pour l'adresse de livraison",this.stateAdress.numero=!1),this.addressLivraison.adresse||(this.errorAdress.adresse="Veuillez donner une adresse de livraison",this.stateAdress.adresse=!1),this.addressFacturationBool&&(this.addressFacturation.email||(this.errorFacturation.email="Veuillez saisir l'adresse email de livraison",this.stateFacturation.email=!1),this.addressFacturation.name||(this.errorFacturation.name="Veuillez donner un nom pour l'adresse de livraison",this.stateFacturation.name=!1),this.addressFacturation.codePostal||(this.errorFacturation.codePostal="Veuillez donner un code postal pour l'adresse de livraison",this.stateFacturation.codePostal=!1),this.addressFacturation.numero||(this.errorFacturation.numero="Veuillez donner un numero de telephone pour l'adresse de livraison",this.stateFacturation.numero=!1),this.addressFacturation.adresse||(this.errorFacturation.adresse="Veuillez donner une adresse de livraison",this.stateFacturation.adresse=!1))}}]),r}(m.c),O=j=L([m.a],j),$=r(56),component=Object($.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",{staticClass:"cart-section spad"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-7"},[r("h3",[e._v("Adresse de livraison")]),e._v(" "),r("div",{staticClass:"card px-2 mb-5"},[r("b-form",{staticClass:"my-1 py-2"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6 mb-3"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"nom",state:e.stateAdress.name,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre nom et prenom"},model:{value:e.addressLivraison.name,callback:function(t){e.$set(e.addressLivraison,"name",t)},expression:"addressLivraison.name"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorAdress.name)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6  mb-3"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"adress",state:e.stateAdress.adresse,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre adress"},model:{value:e.addressLivraison.adresse,callback:function(t){e.$set(e.addressLivraison,"adresse",t)},expression:"addressLivraison.adresse"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorAdress.adresse)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6  mb-3"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"numero",state:e.stateAdress.numero,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre numero"},model:{value:e.addressLivraison.numero,callback:function(t){e.$set(e.addressLivraison,"numero",t)},expression:"addressLivraison.numero"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorAdress.numero)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"code",state:e.stateAdress.codePostal,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre code postal"},model:{value:e.addressLivraison.codePostal,callback:function(t){e.$set(e.addressLivraison,"codePostal",t)},expression:"addressLivraison.codePostal"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorAdress.codePostal)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"email",id:"email",state:e.stateAdress.email,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre adresse mail"},model:{value:e.addressLivraison.email,callback:function(t){e.$set(e.addressLivraison,"email",t)},expression:"addressLivraison.email"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorAdress.email)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-12 mt-2"},[r("b-form-checkbox",{model:{value:e.addressFacturationBool,callback:function(t){e.addressFacturationBool=t},expression:"addressFacturationBool"}},[e._v("\n                    Avez vous une adresse de facturation differente?\n                  ")])],1),e._v(" "),r("div",{staticClass:"col-sm-12 my-3"},[r("b-form-checkbox",{model:{value:e.createAccountBool,callback:function(t){e.createAccountBool=t},expression:"createAccountBool"}},[e._v("\n                    Voulez vous creer un compte?\n                  ")])],1),e._v(" "),e.createAccountBool?r("div",{staticClass:"col-sm-6"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"password",id:"password","aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre mot de passe"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorPassword)+"\n                    ")])],1)]):e._e(),e._v(" "),e.createAccountBool?r("div",{staticClass:"col-sm-6"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"password",id:"password",state:e.stateConfirm,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Confirmer votre mot de passe"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorPassword)+"\n                    ")])],1)]):e._e()])]),e._v(" "),e.addressFacturationBool?r("b-form",{staticClass:"my-2"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6 mb-3"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"nom",state:e.stateFacturation.name,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre nom et prenom"},model:{value:e.addressFacturation.name,callback:function(t){e.$set(e.addressFacturation,"name",t)},expression:"addressFacturation.name"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorFacturation.name)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6  mb-3"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"adress",state:e.stateFacturation.adresse,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre adress"},model:{value:e.addressFacturation.adresse,callback:function(t){e.$set(e.addressFacturation,"adresse",t)},expression:"addressFacturation.adresse"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorFacturation.adresse)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6  mb-3"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"numero",state:e.stateFacturation.numero,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre numero"},model:{value:e.addressFacturation.numero,callback:function(t){e.$set(e.addressFacturation,"numero",t)},expression:"addressFacturation.numero"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorFacturation.numero)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"text",id:"code",state:e.stateFacturation.codePostal,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre code postal"},model:{value:e.addressFacturation.codePostal,callback:function(t){e.$set(e.addressFacturation,"codePostal",t)},expression:"addressFacturation.codePostal"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorFacturation.codePostal)+"\n                    ")])],1)]),e._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{attrs:{role:"group"}},[r("b-form-input",{attrs:{type:"email",id:"email",state:e.stateFacturation.email,"aria-describedby":"input-live-help input-live-feedback",placeholder:"Entrer votre adresse mail"},model:{value:e.addressFacturation.email,callback:function(t){e.$set(e.addressFacturation,"email",t)},expression:"addressFacturation.email"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                      "+e._s(e.errorFacturation.email)+"\n                    ")])],1)])])]):e._e()],1)]),e._v(" "),r("div",{staticClass:"col-sm-5 "},[r("h3",{staticClass:"mb-2"},[e._v("Votre panier")]),e._v(" "),0!=e.produitPaniers.length?r("div",{staticClass:"row card px-2 py-3 mb-5"},[e._m(0),e._v(" "),e._l(e.produitPaniers,(function(t){return r("div",{staticClass:"row my-3"},[r("div",{staticClass:"col-sm-4"},[e._v("\n                "+e._s(t.recette.nom)+"\n              ")]),e._v(" "),r("div",{staticClass:"col-sm-4 text-center"},[r("b-input",{staticStyle:{width:"90px"},attrs:{type:"number",min:"0",size:"sm"},on:{"!change":function(r){return e.prixTotal(t.id,t.quantite)}},model:{value:t.quantite,callback:function(r){e.$set(t,"quantite",r)},expression:"produit.quantite"}})],1),e._v(" "),r("div",{staticClass:"col-sm-4 text-center"},[e._v("\n                $"+e._s(t.recette.prix*t.quantite)+"\n              ")]),e._v(" "),e._m(1,!0)])})),e._v(" "),r("div",{staticClass:"row",staticStyle:{"font-weight":"bold"}},[r("div",{staticClass:"col-sm-6"},[e._v("\n                Prix Total :\n              ")]),e._v(" "),r("div",{staticClass:"col-sm-6 text-center"},[e._v("$"+e._s(e.totalPrice))])])],2):r("div",{staticClass:"row card"},[r("div",{staticClass:"col-sm-12 text-center"},[e._v("\n              La pnaier est vide\n            ")])])])]),e._v(" "),r("div",{staticClass:"row mb-2"},[r("b-button",{attrs:{block:"",size:"lg",variant:"primary"},on:{click:e.sendCommande}},[e._v("\n          Envoyez la commande\n        ")])],1)])]),e._v(" "),r("b-modal",{attrs:{id:"modal-1",centered:"","hide-backdrop":"","hide-footer":"","no-close-on-esc":""},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[r("h5",{staticClass:"my-4 text-uppercase text-center"},[e._v(e._s(e.modalContaint))]),e._v(" "),r("div",{staticClass:"text-center"},[r("nuxt-link",{staticClass:"btn bg-primary block",attrs:{to:"/"}},[e._v("\n        Aller Ã  la page d'acceuil\n      ")])],1)])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row",staticStyle:{"font-weight":"bold"}},[t("div",{staticClass:"col-sm-4"},[t("h5",{staticStyle:{"font-weight":"bold"}},[this._v("Plats")])]),this._v(" "),t("div",{staticClass:"col-sm-4 text-center"},[t("h5",{staticStyle:{"font-weight":"bold"}},[this._v("QuantitÃ©")])]),this._v(" "),t("div",{staticClass:"col-sm-4 text-center"},[t("h5",{staticStyle:{"font-weight":"bold"}},[this._v("Totals")])]),this._v(" "),t("div",{staticClass:"col-sm-12  text-center"},[t("div",{staticClass:"ml-3 text-center",staticStyle:{"border-bottom":"1px solid",width:"80%"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-sm-12  text-center mt-2"},[t("div",{staticClass:"ml-3 text-center",staticStyle:{"border-bottom":"1px solid",width:"80%"}})])}],!1,null,"ee877f84",null);t.default=component.exports}}]);